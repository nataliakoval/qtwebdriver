<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>WD: Views management and actions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">WD
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_views.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Views management and actions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>View enumerator</h1>
<p>Session contains map of ViewId to ViewHandle. View enumerator can update this map. It adds new views and removes closed. For each view type there should be separated view enumerator - class derived from <a class="el" href="classwebdriver_1_1_abstract_view_enumerator_impl.html" title="base class for view enumerator">webdriver::AbstractViewEnumeratorImpl</a>. Custom AbstractViewEnumeratorImpl has only one virtual method EnumerateViews() that returns all found view of specific types.</p>
<p>Example of usage: </p>
<div class="fragment"><div class="line"><a class="code" href="classwebdriver_1_1_view_enumerator.html#af6f725ff652e500014c11d6aee8704ac">webdriver::ViewEnumerator::AddViewEnumeratorImpl</a>(<span class="keyword">new</span> <a class="code" href="classwebdriver_1_1_web_view_enumerator_impl.html" title="class for QWebView enumerator">webdriver::WebViewEnumeratorImpl</a>());</div>
<div class="line"><a class="code" href="classwebdriver_1_1_view_enumerator.html#af6f725ff652e500014c11d6aee8704ac">webdriver::ViewEnumerator::AddViewEnumeratorImpl</a>(<span class="keyword">new</span> <a class="code" href="classwebdriver_1_1_widget_view_enumerator_impl.html" title="class for QWebView enumerator">webdriver::WidgetViewEnumeratorImpl</a>());</div>
</div><!-- fragment --><h1>View executor</h1>
<p>For separating session and view commands executor concept is used. <a class="el" href="classwebdriver_1_1_view_cmd_executor.html" title="base class for custom view&#39;s executors">webdriver::ViewCmdExecutor</a> is pure virtual class that represents all actions that can be done on single view of specific type in one session. So for each view type there should be separated view executor implemented by customer. Exexcutor can be created only by <a class="el" href="classwebdriver_1_1_view_cmd_executor_creator.html" title="base class for custom cmd executor creators">webdriver::ViewCmdExecutorCreator</a> which knows if it can create executor for passed view. All executor creators are registered in <a class="el" href="classwebdriver_1_1_view_cmd_executor_factory.html" title="This class used for managing commands related to view.">webdriver::ViewCmdExecutorFactory</a>. This singleton is an entry point to get executor for view. </p>
<div class="fragment"><div class="line">Error* error = NULL;</div>
<div class="line">ExecutorPtr executor(ViewCmdExecutorFactory::GetInstance()-&gt;CreateExecutor(session, viewId));</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">if</span> (NULL == executor.get()) {</div>
<div class="line">    <span class="comment">// handle error</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">session-&gt;RunSessionTask(base::Bind(</div>
<div class="line">            &amp;ViewCmdExecutor::GetWindowName,</div>
<div class="line">            base::Unretained(executor.get()),</div>
<div class="line">            title,</div>
<div class="line">            &amp;error));</div>
</div><!-- fragment --><dl class="section remark"><dt>Remarks</dt><dd>ViewCmdExecutorFactory return only first found executor that can operate wit view, so if two executors can handle same view type - registration order is important.</dd></dl>
<p>Example of registration: </p>
<div class="fragment"><div class="line"><a class="code" href="classwebdriver_1_1_view_cmd_executor_factory.html#a304ce101a8eaed3c934b974799a2ca79" title="Returns the singleton instance.">webdriver::ViewCmdExecutorFactory::GetInstance</a>()-&gt;<a class="code" href="classwebdriver_1_1_view_cmd_executor_factory.html#a80b3fc5517c439f0670fbdb50ab7410e">AddViewCmdExecutorCreator</a>(<span class="keyword">new</span> <a class="code" href="classwebdriver_1_1_q_web_view_cmd_executor_creator.html">webdriver::QWebViewCmdExecutorCreator</a>());</div>
<div class="line"><a class="code" href="classwebdriver_1_1_view_cmd_executor_factory.html#a304ce101a8eaed3c934b974799a2ca79" title="Returns the singleton instance.">webdriver::ViewCmdExecutorFactory::GetInstance</a>()-&gt;<a class="code" href="classwebdriver_1_1_view_cmd_executor_factory.html#a80b3fc5517c439f0670fbdb50ab7410e">AddViewCmdExecutorCreator</a>(<span class="keyword">new</span> <a class="code" href="classwebdriver_1_1_q_widget_view_cmd_executor_creator.html">webdriver::QWidgetViewCmdExecutorCreator</a>());</div>
</div><!-- fragment --><h1>View factory</h1>
<p>Each type of view should have own factory, class derived from <a class="el" href="classwebdriver_1_1_view_creator.html" title="base class for custom view&#39;s creators">webdriver::ViewCreator</a>. Factory for single view type should be registered in singleton - <a class="el" href="classwebdriver_1_1_view_factory.html" title="This class used for creating new views.">webdriver::ViewFactory</a>. View can be created by two methods:</p>
<ul>
<li>by class name</li>
<li>by url (in this case it creates any view that can handle this url)</li>
</ul>
<dl class="section remark"><dt>Remarks</dt><dd>Please note that if two factories can create view by same classname(or url) - only one view will be created from first registered factory.</dd></dl>
<p>CreateViewByClassName() and CreateViewForUrl() return ViewHandles. But these handles are not registered in session. User can register them manually or use view enumerator. After enumerating action all view created but not registered will be added to session's views map automatically.</p>
<p>Example of configuration: </p>
<div class="fragment"><div class="line"><a class="code" href="classwebdriver_1_1_view_creator.html" title="base class for custom view&#39;s creators">webdriver::ViewCreator</a>* webCreator = <span class="keyword">new</span> <a class="code" href="classwebdriver_1_1_q_web_view_creator.html" title="base class for custom view&#39;s creators">webdriver::QWebViewCreator</a>();</div>
<div class="line">webCreator-&gt;<a class="code" href="classwebdriver_1_1_view_creator.html#a36fe366d7f030778a5ff13336618c0fc">RegisterViewClass</a>&lt;<a class="code" href="class_q_web_view_ext.html">QWebViewExt</a>&gt;(<span class="stringliteral">&quot;QWebViewExt&quot;</span>);</div>
<div class="line"></div>
<div class="line"><a class="code" href="classwebdriver_1_1_view_creator.html" title="base class for custom view&#39;s creators">webdriver::ViewCreator</a>* widgetCreator = <span class="keyword">new</span> <a class="code" href="classwebdriver_1_1_q_widget_view_creator.html" title="base class for custom view&#39;s creators">webdriver::QWidgetViewCreator</a>();</div>
<div class="line">widgetCreator-&gt;RegisterViewClass&lt;QWidget&gt;(<span class="stringliteral">&quot;QWidget&quot;</span>);</div>
<div class="line">widgetCreator-&gt;RegisterViewClass&lt;WindowTestWidget&gt;(<span class="stringliteral">&quot;WindowTestWidget&quot;</span>);</div>
<div class="line"></div>
<div class="line"><a class="code" href="classwebdriver_1_1_view_factory.html#a3683f13d6506b7fafc771457b65ad43a" title="Returns the singleton instance.">webdriver::ViewFactory::GetInstance</a>()-&gt;<a class="code" href="classwebdriver_1_1_view_factory.html#a23ec0054d6bf37f9ad2d0a793e5fa530">AddViewCreator</a>(webCreator);</div>
<div class="line"><a class="code" href="classwebdriver_1_1_view_factory.html#a3683f13d6506b7fafc771457b65ad43a" title="Returns the singleton instance.">webdriver::ViewFactory::GetInstance</a>()-&gt;<a class="code" href="classwebdriver_1_1_view_factory.html#a23ec0054d6bf37f9ad2d0a793e5fa530">AddViewCreator</a>(widgetCreator);</div>
</div><!-- fragment --><h1>View handles</h1>
<p>Session contains map of ViewId to ViewHandle. <a class="el" href="classwebdriver_1_1_view_handle.html">webdriver::ViewHandle</a> is abstraction intended to keep reference to real window implementation(ie pointer to QWidget). Customizer should implement this abstract class.</p>
<p>Example of custom implementation: </p>
<div class="fragment"><div class="line"><span class="keyword">class </span>QViewHandle : <span class="keyword">public</span> ViewHandle {</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    QViewHandle();</div>
<div class="line">    QViewHandle(QWidget* view);</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> is_valid()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !view_.isNull(); };</div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> equals(<span class="keyword">const</span> ViewHandle* other) <span class="keyword">const</span>;</div>
<div class="line">    QWidget* <span class="keyword">get</span>() { <span class="keywordflow">return</span> view_.data(); };</div>
<div class="line">    </div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">    QPointer&lt;QWidget&gt; view_;</div>
<div class="line">    <span class="keyword">virtual</span> ~QViewHandle() {};</div>
<div class="line">};</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Hybrid WebDriver Framework</a></li>
    <li class="footer">Generated on Tue Oct 28 2014 14:55:19 for WD by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
